# üöÄ Sauti CMS - Quick Start Guide

## What You Have

A **complete, production-ready Django CMS backend** for the Sauti Child Helpline website with:

‚úÖ User Management (Role-based access: Admin, Editor, Author, Viewer)  
‚úÖ Blog/News System (Draft/Publish workflow)  
‚úÖ Resource Library (File uploads with categorization)  
‚úÖ FAQ System (Multilingual support)  
‚úÖ Partner Management  
‚úÖ **Anonymous Reporting System** (Encrypted, secure)  
‚úÖ JWT Authentication  
‚úÖ API Documentation (Swagger/OpenAPI)  
‚úÖ Docker Support  
‚úÖ Production Deployment Guide  

---

## üéØ Get Started in 5 Minutes

### Step 1: Prerequisites
Ensure you have installed:
- Python 3.12+ (`python3 --version`)
- PostgreSQL 16+ (`psql --version`)
- Git (optional)

### Step 2: Quick Setup

```bash
# Navigate to project
cd sauti_cms

# Run automated setup
./setup.sh
```

The setup script will:
- Create virtual environment
- Install all dependencies
- Generate secure keys
- Set up .env file
- Create database (optional)
- Run migrations
- Create superuser (optional)
- Create media directories

### Step 3: Start Development Server

```bash
# Activate virtual environment
source venv/bin/activate

# Start server
python manage.py runserver
```

### Step 4: Access Your CMS

Open your browser:

- **API Root**: http://localhost:8000/api/
- **Admin Panel**: http://localhost:8000/admin/
- **API Docs (Swagger)**: http://localhost:8000/api/docs/
- **API Docs (ReDoc)**: http://localhost:8000/api/redoc/

---

## üìñ Key Files to Know

| File | Purpose |
|------|---------|
| `PROJECT_SUMMARY.md` | Complete project overview and features |
| `README.md` | Comprehensive documentation |
| `DEPLOYMENT.md` | Production deployment guide |
| `API_DOCUMENTATION.md` | API endpoint reference |
| `.env.example` | Environment variables template |
| `setup.sh` | Automated setup script |
| `verify_setup.sh` | System verification script |

---

## üîë Default Credentials

After running `./setup.sh`, you'll create a superuser. Use these credentials to log in to the admin panel.

**First Time Setup:**
```bash
python manage.py createsuperuser
```

Follow the prompts to create your admin account.

---

## üê≥ Docker Alternative

If you prefer Docker:

```bash
# Build and start containers
docker-compose up --build

# Run migrations
docker-compose exec web python manage.py migrate

# Create superuser
docker-compose exec web python manage.py createsuperuser
```

Access at: http://localhost:8000

---

## üß™ Test the API

### 1. Get JWT Token
```bash
curl -X POST http://localhost:8000/api/auth/login/ \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "your-password"}'
```

### 2. Submit Anonymous Report (No Auth Required!)
```bash
curl -X POST http://localhost:8000/api/reports/ \
  -H "Content-Type: application/json" \
  -d '{
    "category": "CHILD_PROTECTION",
    "description": "Test report",
    "is_anonymous": true
  }'
```

### 3. Get Posts
```bash
curl http://localhost:8000/api/posts/
```

---

## üìä Database Models

### Core Models Implemented:

1. **User** - Custom user with roles (Admin, Editor, Author, Viewer)
2. **Post** - Blog/news with categories, tags, multilingual
3. **Resource** - File library with downloads
4. **FAQ** - Questions/answers with categories
5. **Partner** - Partner organizations
6. **Report** - Anonymous case reporting with encryption

---

## üîê Security Features

1. **Encrypted Reports** - Sensitive data encrypted with Fernet
2. **JWT Authentication** - Secure token-based auth
3. **Role-Based Access** - Granular permissions
4. **Anonymous Reporting** - No auth required for submissions
5. **Production Security** - HTTPS, secure cookies, HSTS when DEBUG=False

---

## üåç Multilingual Support

Supports 3 languages out of the box:
- English (`en`)
- Luganda (`lg`)
- Swahili (`sw`)

Filter content: `?language=en`

---

## üõ†Ô∏è Verify Your Setup

Run the verification script:

```bash
./verify_setup.sh
```

This checks:
- Python version
- Virtual environment
- Environment configuration
- Database connection
- Dependencies
- Migrations
- Media directories
- Django apps
- API availability

---

## üìù Next Steps

### 1. Configure Environment
Edit `.env` file with your settings:
```env
DEBUG=True
SECRET_KEY=<auto-generated>
DB_NAME=sauti_cms
DB_USER=postgres
DB_PASSWORD=your-password
ENCRYPTION_KEY=<auto-generated>
```

### 2. Create Sample Data
```bash
python manage.py shell
```

```python
# Create categories
from posts.models import Category
Category.objects.create(name="Child Protection", slug="child-protection")
Category.objects.create(name="GBV", slug="gbv")

# Create a post
from posts.models import Post
from users.models import User

admin = User.objects.first()
Post.objects.create(
    title="Welcome to Sauti",
    content="This is our first post",
    author=admin,
    status="PUBLISHED"
)
```

### 3. Explore Admin Panel
- Log in to http://localhost:8000/admin/
- Create posts, resources, FAQs
- Manage users and roles
- View submitted reports

### 4. Test Anonymous Reporting
- Go to http://localhost:8000/api/docs/
- Find "POST /api/reports/"
- Click "Try it out"
- Submit a test report (no auth needed!)

### 5. Build Frontend
- Use Vue 3 to build the frontend
- Connect to API endpoints
- CORS is pre-configured for localhost:3000

---

## üÜò Troubleshooting

### Issue: Database connection error
```bash
# Check PostgreSQL is running
sudo systemctl status postgresql

# Create database
createdb sauti_cms

# Check .env settings
cat .env | grep DB_
```

### Issue: Virtual environment not found
```bash
# Create virtual environment
python3 -m venv venv

# Activate
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt
```

### Issue: Migrations not applied
```bash
python manage.py makemigrations
python manage.py migrate
```

### Issue: Static files not loading
```bash
python manage.py collectstatic --noinput
```

---

## üìö Documentation

| Document | Description |
|----------|-------------|
| `PROJECT_SUMMARY.md` | Complete feature list and architecture |
| `README.md` | Full documentation with examples |
| `DEPLOYMENT.md` | Production deployment (Docker + Traditional) |
| `API_DOCUMENTATION.md` | All API endpoints with examples |

---

## üéØ API Highlights

### Authentication Endpoints
- `POST /api/auth/login/` - Get JWT token
- `POST /api/auth/register/` - Register user (Admin only)
- `GET /api/auth/profile/` - Get user profile

### Content Endpoints
- `GET /api/posts/` - List blog posts
- `GET /api/resources/` - List resources
- `GET /api/faqs/` - List FAQs
- `GET /api/partners/` - List partners

### Reporting Endpoint (No Auth!) ‚≠ê
- `POST /api/reports/` - Submit report anonymously

### Query Parameters
- `?search=keyword` - Search content
- `?category=slug` - Filter by category
- `?language=en` - Filter by language
- `?featured=true` - Only featured items

---

## üöÄ Deploy to Production

When ready to deploy:

1. Read `DEPLOYMENT.md`
2. Set `DEBUG=False` in `.env`
3. Configure production database
4. Set up SSL certificate
5. Use Gunicorn + Nginx (or Docker)

Quick production checklist:
```bash
# Update .env
DEBUG=False
ALLOWED_HOSTS=yourdomain.com
SECRET_KEY=<new-secure-key>

# Collect static files
python manage.py collectstatic --noinput

# Run with Gunicorn
gunicorn cms.wsgi:application --bind 0.0.0.0:8000
```

---

## ‚úÖ What's Included

- [x] Complete Django 5.x backend
- [x] 6 Django apps (users, posts, resources, faqs, partners, reports)
- [x] JWT authentication
- [x] Anonymous reporting with encryption
- [x] Role-based permissions (4 roles)
- [x] Multilingual support (3 languages)
- [x] Admin panel customization
- [x] API documentation (Swagger)
- [x] Docker configuration
- [x] Production deployment guide
- [x] Setup automation scripts
- [x] Comprehensive documentation

---

## üéâ You're Ready!

Your Sauti CMS backend is **production-ready**. Start building your Vue 3 frontend and connect it to these APIs.

**Questions?** Check the documentation or contact: support@sauti.mglsd.go.ug

---

**Built with ‚ù§Ô∏è for Sauti Child Helpline**
